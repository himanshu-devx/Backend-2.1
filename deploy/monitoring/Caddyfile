{
  email {$CADDY_EMAIL}
  auto_https on
}

{$GRAFANA_DOMAIN} {
  encode zstd gzip
  reverse_proxy grafana:3000 {
    header_up -X-Forwarded-For
    header_up -X-Real-IP
    header_up X-Forwarded-For {remote_host}
    header_up X-Real-IP {remote_host}
  }
}

{$PROMETHEUS_DOMAIN} {
  encode zstd gzip
  reverse_proxy prometheus:9090 {
    header_up -X-Forwarded-For
    header_up -X-Real-IP
    header_up X-Forwarded-For {remote_host}
    header_up X-Real-IP {remote_host}
  }
}

{$LOKI_DOMAIN} {
  encode zstd gzip
  reverse_proxy loki:3100 {
    header_up -X-Forwarded-For
    header_up -X-Real-IP
    header_up X-Forwarded-For {remote_host}
    header_up X-Real-IP {remote_host}
  }
}

{$TEMPO_DOMAIN} {
  encode zstd gzip
  reverse_proxy tempo:3200 {
    header_up -X-Forwarded-For
    header_up -X-Real-IP
    header_up X-Forwarded-For {remote_host}
    header_up X-Real-IP {remote_host}
  }
}
