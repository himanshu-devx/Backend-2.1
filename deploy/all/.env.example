# =====================================================
# Runtime
# =====================================================
NODE_ENV=production
LOG_LEVEL=info
SERVICE_NAME=app-service

API_PORT=4000
PAYMENT_PORT=4001

# =====================================================
# Application URLs (PUBLIC)
# =====================================================
APP_BASE_URL=https://api.example.com
FRONTEND_URL=https://app.example.com
APP_BRAND_NAME=Wisipay Fintech

# Caddy expects hostnames only (no scheme)
API_DOMAIN=api.example.com
PAYMENT_DOMAIN=pay.example.com

# =====================================================
# MongoDB (Docker internal)
# =====================================================
MONGO_INITDB_ROOT_USERNAME=mongo
MONGO_INITDB_ROOT_PASSWORD=CHANGE_ME_MONGO_PASSWORD
MONGO_DB_NAME=app_db
MONGODB_URI=mongodb://mongo:CHANGE_ME_MONGO_PASSWORD@mongodb:27017/app_db?authSource=admin

# =====================================================
# PostgreSQL (Ledger / Core DB)
# =====================================================
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_ME_POSTGRES_PASSWORD
POSTGRES_DB=app_ledger
POSTGRES_POOL_MAX=20

# =====================================================
# Redis (Queue / Cache / Locks)
# =====================================================
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD
REDIS_PORT=6379
REDIS_URL=redis://:CHANGE_ME_REDIS_PASSWORD@redis:6379

# =====================================================
# JWT / Crypto / Security
# =====================================================
JWT_SECRET=CHANGE_ME_64_CHAR_RANDOM_SECRET
API_SECRET_ENC_KEY=CHANGE_ME_32_BYTES_MIN

# =====================================================
# Email / MailerSend
# =====================================================
MAILERSEND_API_KEY=CHANGE_ME_MAILERSEND_API_KEY
MAILERSEND_FROM_EMAIL=verified@example.com
MAILERSEND_FROM_NAME=App Support

# =====================================================
# Rate Limiting / TPS
# =====================================================
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=60
SYSTEM_TPS=100
SYSTEM_TPS_WINDOW=1

# =====================================================
# Admin Controls (optional)
# =====================================================
SUPER_ADMIN_PANEL_IP_WHITELIST_ENABLED=false
SUPER_ADMIN_IPS=

# =====================================================
# Observability / OpenTelemetry
# =====================================================
OTLP_HTTP_URL=http://otel-collector:4318/v1/traces

# =====================================================
# Grafana
# =====================================================
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=CHANGE_ME_GRAFANA_PASSWORD

# =====================================================
# Caddy / TLS
# =====================================================
CADDY_EMAIL=admin@example.com

# =====================================================
# Provider Credentials (optional)
# =====================================================
# Format:
#   <PROVIDER_ID>_<LEGAL_ENTITY_ID>_<KEY>=value   (gateways)
#   <PROVIDER_ID>_<KEY>=value                     (banks)
#
# Keys are case-insensitive and normalized:
# API_KEY / APIKEY / apiKey -> apiKey
#
# Allowed keys:
# API_KEY, API_SECRET, API_SALT, BASE_URL, MERCHANT_ID,
# CLIENT_ID, ACCESS_CODE, WORKING_KEY, SECRET_KEY, API_TOKEN
#
# Examples (Gateway with legal entity "ABC"):
# PAYU_ABC_API_KEY=change_me
# PAYU_ABC_API_SALT=change_me
# PAYU_ABC_BASE_URL=https://provider.example.com
#
# Example (Bank provider without legal entity):
# ICICI_API_KEY=change_me

# =====================================================
# Feature Flags / Misc
# =====================================================
REPORT_EMAIL_TRANSACTIONS_ENABLED=true
REPORT_EMAIL_STATEMENT_ENABLED=true
# Optional: directory for generated reports (must be writable)
REPORT_STORAGE_DIR=/data/reports
AMOUNT_UNIT=PAISE
